---
name: pr
description: PR review, improvement suggestions, and auto-merge workflow
---

# /pr - PR ë¦¬ë·° ë° ë¨¸ì§€ ê´€ë¦¬

PR ë¦¬ë·° â†’ ê°œì„  ì œì•ˆ â†’ ìë™ ë¨¸ì§€ê¹Œì§€ í†µí•© ì›Œí¬í”Œë¡œìš°ì…ë‹ˆë‹¤.

## Usage

```
/pr <action> [#PRë²ˆí˜¸] [options]

Actions:
  review [#N]     PR ì½”ë“œ ë¦¬ë·° ì‹¤í–‰
  merge [#N]      ì¡°ê±´ í™•ì¸ í›„ ë¨¸ì§€
  auto [#N]       ë¦¬ë·° + ìë™ ë¨¸ì§€ (ì „ì²´ ì›Œí¬í”Œë¡œìš°)
  list            ë¦¬ë·° ëŒ€ê¸° PR ëª©ë¡
```

---

## /pr review - PR ë¦¬ë·°

```bash
/pr review           # í˜„ì¬ ë¸Œëœì¹˜ì˜ PR ë¦¬ë·°
/pr review #42       # íŠ¹ì • PR ë¦¬ë·°
/pr review --strict  # ì—„ê²© ëª¨ë“œ (ê²½ê³ ë„ ë¸”ë¡œì»¤)
```

### ë¦¬ë·° ì›Œí¬í”Œë¡œìš°

```
PR ë¦¬ë·° ì‹œì‘
    â”‚
    â”œâ”€ [ë³‘ë ¬ ê²€ì‚¬] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      â”‚                                 â”‚
    â”‚      â”œâ”€ ì½”ë“œ í’ˆì§ˆ (lint, type)         â”‚
    â”‚      â”œâ”€ í…ŒìŠ¤íŠ¸ ê²€ì¦ (coverage)         â”‚ ë³‘ë ¬
    â”‚      â””â”€ ë³´ì•ˆ ê²€ì‚¬ (secrets, deps)      â”‚
    â”‚                                   â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ ê²°ê³¼ ë¶„ì„
    â”‚      â”œâ”€ Critical/High â†’ ë¸”ë¡œì»¤ (ë¨¸ì§€ ì°¨ë‹¨)
    â”‚      â”œâ”€ Medium â†’ ê°œì„  ì œì•ˆ
    â”‚      â””â”€ Low â†’ ì°¸ê³  ì‚¬í•­
    â”‚
    â””â”€ ë¦¬ë·° ì½”ë©˜íŠ¸ ì‘ì„±
           â””â”€ gh pr comment --body "..."
```

### ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸

| ì¹´í…Œê³ ë¦¬ | ê²€ì‚¬ í•­ëª© | ì‹¬ê°ë„ | ìë™ ìˆ˜ì • |
|----------|----------|--------|----------|
| **ì½”ë“œ í’ˆì§ˆ** | Lint ì˜¤ë¥˜ | High | âœ… |
| | Type ì˜¤ë¥˜ | High | âŒ |
| | ë³µì¡ë„ ì´ˆê³¼ (>10) | Medium | âŒ |
| **í…ŒìŠ¤íŠ¸** | í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ | High | âŒ |
| | ì»¤ë²„ë¦¬ì§€ <80% | Medium | âŒ |
| | ì‹ ê·œ ì½”ë“œ í…ŒìŠ¤íŠ¸ ì—†ìŒ | Low | âŒ |
| **ë³´ì•ˆ** | í•˜ë“œì½”ë”©ëœ ì‹œí¬ë¦¿ | Critical | âŒ |
| | ì·¨ì•½í•œ ì˜ì¡´ì„± | High | âš ï¸ |
| **ìŠ¤íƒ€ì¼** | í¬ë§·íŒ… ì˜¤ë¥˜ | Low | âœ… |

### ë¦¬ë·° ê²°ê³¼ ì¶œë ¥

```markdown
## PR #42 ë¦¬ë·° ê²°ê³¼

### âœ… í†µê³¼
- [x] CI ë¹Œë“œ ì„±ê³µ
- [x] í…ŒìŠ¤íŠ¸ 42/42 í†µê³¼
- [x] ì»¤ë²„ë¦¬ì§€ 85%

### âŒ ë¸”ë¡œì»¤ (ë¨¸ì§€ ì°¨ë‹¨)
1. **src/api.py:78** - í•˜ë“œì½”ë”©ëœ API í‚¤ ë°œê²¬
   ```python
   # ë¬¸ì œ
   API_KEY = "<YOUR_API_KEY>"  # âŒ ì‹œí¬ë¦¿ ë…¸ì¶œ

   # í•´ê²°
   API_KEY = os.getenv("API_KEY")  # âœ… í™˜ê²½ë³€ìˆ˜
   ```

### âš ï¸ ê°œì„  ì œì•ˆ
1. **src/auth.py:45** - í•¨ìˆ˜ ë³µì¡ë„ 12 (ê¶Œì¥: 10)
   - í—¬í¼ í•¨ìˆ˜ë¡œ ë¶„ë¦¬ ê¶Œì¥

### ğŸ’¡ ì°¸ê³ 
- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì–‘í˜¸ (85%)
- ì½”ë“œ ìŠ¤íƒ€ì¼ ì¼ê´€ì„± ìœ ì§€

---
**ê²°ê³¼**: ğŸ”´ ë¸”ë¡œì»¤ ë°œê²¬ - ìˆ˜ì • í•„ìš”
```

---

## /pr merge - PR ë¨¸ì§€

```bash
/pr merge            # í˜„ì¬ ë¸Œëœì¹˜ PR ë¨¸ì§€
/pr merge #42        # íŠ¹ì • PR ë¨¸ì§€
/pr merge --force    # ì¡°ê±´ ë¬´ì‹œí•˜ê³  ë¨¸ì§€ (ìœ„í—˜)
```

### ë¨¸ì§€ ì¡°ê±´

```yaml
# í•„ìˆ˜ ì¡°ê±´ (í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨ ì‹œ ë¨¸ì§€ ì°¨ë‹¨)
required:
  - ci_passed: true        # CI í†µê³¼
  - no_conflicts: true     # ì¶©ëŒ ì—†ìŒ
  - no_blockers: true      # Critical/High ì´ìŠˆ ì—†ìŒ

# ê¶Œì¥ ì¡°ê±´ (ê²½ê³ ë§Œ, ë¨¸ì§€ ê°€ëŠ¥)
recommended:
  - branch_updated: true   # ë² ì´ìŠ¤ ë¸Œëœì¹˜ ìµœì‹ 
  - test_coverage: 80      # ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ
```

### ë¨¸ì§€ ë°©ë²•

```bash
# ê¸°ë³¸: squash merge (ì»¤ë°‹ ì •ë¦¬)
gh pr merge #42 --squash --delete-branch

# ì˜µì…˜
--merge     # ì¼ë°˜ ë¨¸ì§€ (ì»¤ë°‹ ìœ ì§€)
--rebase    # ë¦¬ë² ì´ìŠ¤ ë¨¸ì§€
--no-delete # ë¸Œëœì¹˜ ìœ ì§€
```

---

## /pr auto - ìë™ ë¦¬ë·° + ë¨¸ì§€

```bash
/pr auto             # í˜„ì¬ ë¸Œëœì¹˜ PR
/pr auto #42         # íŠ¹ì • PR
/pr auto --strict    # ì—„ê²© ëª¨ë“œ
```

### ì „ì²´ ì›Œí¬í”Œë¡œìš°

```
/pr auto ì‹¤í–‰
    â”‚
    â”œâ”€ Step 1: PR ì •ë³´ í™•ì¸
    â”‚      â””â”€ gh pr view #N --json ...
    â”‚
    â”œâ”€ Step 2: ë¦¬ë·° ì‹¤í–‰ (/pr review)
    â”‚      â”‚
    â”‚      â”œâ”€ ë¸”ë¡œì»¤ ë°œê²¬ â†’ ê°œì„  ì œì•ˆ + ì¢…ë£Œ
    â”‚      â”‚     â””â”€ ì‚¬ìš©ì ìˆ˜ì • ëŒ€ê¸°
    â”‚      â”‚
    â”‚      â””â”€ ë¸”ë¡œì»¤ ì—†ìŒ â†’ Step 3 ì§„í–‰
    â”‚
    â”œâ”€ Step 3: ë¨¸ì§€ ì¡°ê±´ ê²€ì¦
    â”‚      â”‚
    â”‚      â”œâ”€ CI ìƒíƒœ í™•ì¸
    â”‚      â”œâ”€ ì¶©ëŒ í™•ì¸
    â”‚      â””â”€ ë¸Œëœì¹˜ ìƒíƒœ í™•ì¸
    â”‚
    â”œâ”€ Step 4: ì‚¬ìš©ì í™•ì¸ (--auto-approve ì—†ì„ ì‹œ)
    â”‚      â”‚
    â”‚      â””â”€ "ë¨¸ì§€ë¥¼ ì§„í–‰í• ê¹Œìš”? (Y/N)"
    â”‚
    â””â”€ Step 5: ë¨¸ì§€ ì‹¤í–‰
           â”‚
           â”œâ”€ gh pr merge --squash --delete-branch
           â””â”€ ì™„ë£Œ ë©”ì‹œì§€ ì¶œë ¥
```

### ìë™ ìŠ¹ì¸ ëª¨ë“œ

```bash
# ë¸”ë¡œì»¤ ì—†ìœ¼ë©´ ìë™ ë¨¸ì§€ (í™•ì¸ ìƒëµ)
/pr auto --auto-approve

# ì‚¬ìš© ì¡°ê±´
# - CI í†µê³¼
# - ë¦¬ë·° ë¸”ë¡œì»¤ ì—†ìŒ
# - ì¶©ëŒ ì—†ìŒ
```

---

## /pr list - PR ëª©ë¡

```bash
/pr list             # ëª¨ë“  Open PR
/pr list --mine      # ë‚´ê°€ ìƒì„±í•œ PR
/pr list --review    # ë¦¬ë·° ìš”ì²­ëœ PR
```

### ì¶œë ¥ ì˜ˆì‹œ

```markdown
## Open PRs (3ê°œ)

| # | ì œëª© | ë¸Œëœì¹˜ | CI | ë¦¬ë·° |
|---|------|--------|-----|------|
| #42 | Add OAuth2 | feat/auth | âœ… | ğŸŸ¡ ëŒ€ê¸° |
| #41 | Fix login bug | fix/login | âœ… | âœ… ìŠ¹ì¸ |
| #40 | Update docs | docs/api | âŒ | - |

### ê¶Œì¥ ì•¡ì…˜
- #41: ë¨¸ì§€ ê°€ëŠ¥ (`/pr merge #41`)
- #40: CI ì‹¤íŒ¨ í™•ì¸ í•„ìš”
```

---

## ì„¤ì •

### ë¨¸ì§€ ì„¤ì • íŒŒì¼

```yaml
# .claude/config/pr-merge.yaml
merge:
  method: squash           # squash, merge, rebase
  delete_branch: true      # ë¨¸ì§€ í›„ ë¸Œëœì¹˜ ì‚­ì œ

review:
  strict_mode: false       # true: ê²½ê³ ë„ ë¸”ë¡œì»¤
  auto_fix: true           # lint/format ìë™ ìˆ˜ì •

thresholds:
  complexity: 10           # í•¨ìˆ˜ ë³µì¡ë„ í•œê³„
  coverage: 80             # ìµœì†Œ ì»¤ë²„ë¦¬ì§€ (%)

labels:
  auto_merge:              # ìë™ ë¨¸ì§€ í—ˆìš© ë¼ë²¨
    - "auto-merge"
    - "trivial"
  block_merge:             # ë¨¸ì§€ ì°¨ë‹¨ ë¼ë²¨
    - "wip"
    - "do-not-merge"
```

---

## ì—°ë™ ì›Œí¬í”Œë¡œìš°

```
/work "ê¸°ëŠ¥ êµ¬í˜„"
    â”‚
    â”œâ”€ êµ¬í˜„ ì™„ë£Œ
    â”‚
    â”œâ”€ /create pr
    â”‚      â””â”€ PR ìƒì„±
    â”‚
    â””â”€ /pr auto
           â”œâ”€ ë¦¬ë·° ì‹¤í–‰
           â”œâ”€ ê°œì„  ì œì•ˆ (í•„ìš” ì‹œ)
           â””â”€ ìë™ ë¨¸ì§€
```

---

## ì˜ˆì‹œ

### ê¸°ë³¸ ì‚¬ìš©

```bash
$ /pr auto

ğŸ” PR #42 ì •ë³´ í™•ì¸...
   ë¸Œëœì¹˜: feat/oauth â†’ main
   ì»¤ë°‹: 3ê°œ
   ë³€ê²½: +150 / -20

ğŸ”¬ ë¦¬ë·° ì‹¤í–‰ ì¤‘...
   [1/3] ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬... âœ…
   [2/3] í…ŒìŠ¤íŠ¸ ê²€ì¦... âœ… (85% coverage)
   [3/3] ë³´ì•ˆ ê²€ì‚¬... âœ…

ğŸ“‹ ë¦¬ë·° ê²°ê³¼
   âœ… ë¸”ë¡œì»¤: 0
   âš ï¸ ê°œì„  ì œì•ˆ: 2
   ğŸ’¡ ì°¸ê³ : 1

âœ… ë¨¸ì§€ ì¡°ê±´ ì¶©ì¡±
   - CI: âœ… í†µê³¼
   - ì¶©ëŒ: âœ… ì—†ìŒ
   - ë¸Œëœì¹˜: âœ… ìµœì‹ 

ë¨¸ì§€ë¥¼ ì§„í–‰í• ê¹Œìš”? (Y/N): Y

ğŸ‰ PR #42 ë¨¸ì§€ ì™„ë£Œ!
   â†’ main ë¸Œëœì¹˜ì— squash merge
   â†’ feat/oauth ë¸Œëœì¹˜ ì‚­ì œë¨
```

### ë¸”ë¡œì»¤ ë°œê²¬ ì‹œ

```bash
$ /pr auto

ğŸ”¬ ë¦¬ë·° ì‹¤í–‰ ì¤‘...
   [1/3] ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬... âŒ
   [2/3] í…ŒìŠ¤íŠ¸ ê²€ì¦... âœ…
   [3/3] ë³´ì•ˆ ê²€ì‚¬... âš ï¸

ğŸ“‹ ë¦¬ë·° ê²°ê³¼

### âŒ ë¸”ë¡œì»¤ (1ê°œ)
1. **src/config.py:12** - í•˜ë“œì½”ë”©ëœ ì‹œí¬ë¦¿
   ```python
   # í˜„ì¬
   DB_PASSWORD = "secret123"

   # ìˆ˜ì • ë°©ë²•
   DB_PASSWORD = os.getenv("DB_PASSWORD")
   ```

### âš ï¸ ê°œì„  ì œì•ˆ (1ê°œ)
1. ì·¨ì•½í•œ ì˜ì¡´ì„±: requests==2.25.0
   - ê¶Œì¥: requests>=2.31.0

ğŸ”´ ë¨¸ì§€ ì°¨ë‹¨ë¨ - ë¸”ë¡œì»¤ ìˆ˜ì • í›„ ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”.
```

---

## ê´€ë ¨

- `/create pr` - PR ìƒì„±
- `/check` - ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
- `/commit` - ì»¤ë°‹ ìƒì„±
- `pr-review-agent` ìŠ¤í‚¬ - ìƒì„¸ ë¦¬ë·° ë¡œì§
